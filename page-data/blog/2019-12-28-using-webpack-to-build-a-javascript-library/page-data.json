{"componentChunkName":"component---src-templates-post-tsx","path":"/blog/2019-12-28-using-webpack-to-build-a-javascript-library/","result":{"data":{"file":{"name":"2019-12-28-using-webpack-to-build-a-javascript-library","childMarkdownRemark":{"html":"<p>Like building applications, webpack can be used to build libraries.\nIn this post, you will learn how to use webpack and babel to build your own library.</p>\n<h2>Demo Library</h2>\n<p>Assuming having the following project, a small library called <code class=\"language-text\">even-numbers</code> with exported <code class=\"language-text\">isEven</code> and <code class=\"language-text\">isOdd</code> methods.</p>\n<p><strong>Files</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">.\n├── src\n│   └── index.js\n└── package.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>src/index.js</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isEven</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isNaN</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The first argument must be a number\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isOdd</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span><span class=\"token function\">isEven</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Goals</h2>\n<ul>\n<li>\n<p>I want my library to be compatible with all the long-term support nodejs versions.</p>\n</li>\n<li>\n<p>I want my library to be compatible with all the browsers with a market share bigger than <code class=\"language-text\">1%</code>.</p>\n</li>\n<li>\n<p>Different developers have different javascript stacks, and I would like my library to be consumed in various ways as well.</p>\n</li>\n</ul>\n<p><strong>ES Module import</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> isEven<span class=\"token punctuation\">,</span> isOdd <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"even-numbers\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>CommonJS Module require</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isEven<span class=\"token punctuation\">,</span> isOdd <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"even-numbers\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>AMD Module require</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"even-numbers\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"evenNumbers\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">evenNumbers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isEven<span class=\"token punctuation\">,</span> isOdd <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> evenNumbers<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Directly in the browser</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/even-numbers<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isEven<span class=\"token punctuation\">,</span> isOdd <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>evenNumbers<span class=\"token punctuation\">;</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Step-1 Installing babel</h2>\n<p>Install <code class=\"language-text\">@babel/core</code> and <code class=\"language-text\">@babel/preset-env</code> as development dependencies.\n<code class=\"language-text\">@babel/preset-env</code> is a smart preset that allows you to use the latest JavaScript without needing to micromanage which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> @babel/core @babel/preset-env\n<span class=\"token comment\"># or using npm</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @babel/core @babel/preset-env</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Create a <code class=\"language-text\">.babelrc</code> file in your project root, with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{\n  \"presets\": [\n    [\n      \"@babel/env\",\n      {\n        \"targets\": \"> 1%, maintained node versions\"\n      }\n    ]\n  ]\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Those configurations would make sure our build will be compatible with:</strong></p>\n<ol>\n<li><code class=\"language-text\">> 1%</code> - All the browsers with a market share bigger than <code class=\"language-text\">1%</code>.</li>\n<li><code class=\"language-text\">maintained node versions</code> - All the currently maintained nodejs versions, see: <a href=\"https://nodejs.org/en/about/releases/\">https://nodejs.org/en/about/releases/</a></li>\n</ol>\n<h2>Step-2 Installing webpack</h2>\n<p>Install <code class=\"language-text\">webpack</code> and <code class=\"language-text\">babel-loader</code> as development dependencies.\n<code class=\"language-text\">babel-loader</code> is a webpack loader; it will allow webpack to use <code class=\"language-text\">babel</code> to build javascript files.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-D</span> webpack babel-loader</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Create a <code class=\"language-text\">webpack.config.js</code> file in your project root, with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"./src/index.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">globalObject</span><span class=\"token operator\">:</span> <span class=\"token string\">\"this\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">libraryTarget</span><span class=\"token operator\">:</span> <span class=\"token string\">\"umd\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">library</span><span class=\"token operator\">:</span> <span class=\"token string\">\"evenNumbers\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.js$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The first part of the config is the <code class=\"language-text\">entry</code> field, and this is the entry point of the library:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./src/index.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The second field is the <code class=\"language-text\">output</code>, and this will configure what output webpack should produce.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'index.js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">library</span><span class=\"token operator\">:</span> <span class=\"token string\">'evenNumbers'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">globalObject</span><span class=\"token operator\">:</span> <span class=\"token string\">'this'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">libraryTarget</span><span class=\"token operator\">:</span> <span class=\"token string\">'umd'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">path</code> together with <code class=\"language-text\">filename</code> - will be resolved to the build result destination, in this case, <code class=\"language-text\">./dist/index.js</code>.</p>\n</li>\n<li>\n<p><code class=\"language-text\">library</code> - the library name. Will be used to consume the library.</p>\n</li>\n<li>\n<p><code class=\"language-text\">globalObject: 'this'</code> - will make the library publicly available by using <code class=\"language-text\">global.evenNumbers</code> in node or <code class=\"language-text\">window.evenNumbers</code> in the browser.</p>\n</li>\n<li>\n<p><code class=\"language-text\">libraryTarget: 'umd'</code> - will make the library available when using AMD or CommonJS</p>\n</li>\n</ul>\n<p>The last part is the <code class=\"language-text\">module</code> filed where we add the <code class=\"language-text\">babel-loader</code> so webpack will build the javascript using <code class=\"language-text\">babel</code> together with the configurations in the <code class=\"language-text\">.babelrc</code> file.\nThis will add the compatibility for all platforms.</p>\n<h2>Step-3 Make the library available by the library name when using AMD or CommonJS</h2>\n<p>Add <code class=\"language-text\">dist/index.js</code> to the <code class=\"language-text\">main</code> field in the <code class=\"language-text\">package.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/index.js\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>This will make the library available to import/require while using the library name.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> isEven<span class=\"token punctuation\">,</span> isOdd <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"even-numbers\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Last steps - Create the build script and use it</h2>\n<p>Add <code class=\"language-text\">build</code> and <code class=\"language-text\">develop</code> scripts to the <code class=\"language-text\">package.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --mode production\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"develop\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --mode development --watch\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>To build the library, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> build\n<span class=\"token comment\"># or using npm</span>\n<span class=\"token function\">npm</span> run build</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>This will produce the following output:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ webpack <span class=\"token parameter variable\">--mode</span> production\nHash: 187393c09f5eb7fe7a4e\nVersion: webpack <span class=\"token number\">4.41</span>.4\nTime: 241ms\nBuilt at: <span class=\"token number\">12</span>/28/2019 <span class=\"token number\">5</span>:07:55 PM\n   Asset      Size  Chunks             Chunk Names\nindex.js  <span class=\"token number\">1.49</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  main\nEntrypoint main <span class=\"token operator\">=</span> index.js\n<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> ./src/index.js <span class=\"token number\">1.05</span> KiB <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">[</span>built<span class=\"token punctuation\">]</span>\nDone <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.66s.</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>And will create the <code class=\"language-text\">./dist/index.js</code> file with the library, ready to be consumed.</strong></p>\n<p>To build the library in watch mode, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> develop\n<span class=\"token comment\"># or using npm</span>\n<span class=\"token function\">npm</span> run develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>Optimization Bonus - Using common libraries</h2>\n<p>Many libraries use other common and popular libraries behind the scense. Such an example can be a library that exports react components.\nIn this case, you would want to avoid building <code class=\"language-text\">react</code> into your library bundle and instead trust the consumer to provide <code class=\"language-text\">react</code> and require it before the library.</p>\n<p>We can tell webpack not build <code class=\"language-text\">react</code> into the library target by adding the <code class=\"language-text\">externals</code> field to the webpack config.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token literal-property property\">externals</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">react</span><span class=\"token operator\">:</span> <span class=\"token string\">'react'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If the library uses <code class=\"language-text\">jquery</code> and <code class=\"language-text\">lodash</code>, those can be added as well:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token literal-property property\">externals</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">react</span><span class=\"token operator\">:</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">jquery</span><span class=\"token operator\">:</span> <span class=\"token string\">'jQuery'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">lodash</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">commonjs</span><span class=\"token operator\">:</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">amd</span><span class=\"token operator\">:</span> <span class=\"token string\">'lodash'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token string\">'_'</span> <span class=\"token comment\">// indicates global variable</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>Happy Hacking!!!</strong></p>\n<h2>Useful</h2>\n<ul>\n<li><a href=\"https://github.com/sharvit/node-mdl-starter\">node-mdl-starter</a> - A starter project for open sourced JavaScript libraries.</li>\n<li><a href=\"https://github.com/sharvit/generator-node-mdl\">generator-node-mdl</a> - Generate an open source JavaScript libraries.</li>\n</ul>","excerpt":"Like building applications, webpack can be used to build libraries.\nIn this post, you will learn how to use webpack and babel to build your own library. Demo Library Assuming having the following project, a small library called  with exported  and  methods. Files src/index.js…","frontmatter":{"title":"Using webpack to build a javascript library","coverImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#282828","images":{"fallback":{"src":"/static/c5d2c67f829f3c79343413ee11d249bd/ac0ad/2019-12-28-using-webpack-to-build-a-javascript-library.png","srcSet":"/static/c5d2c67f829f3c79343413ee11d249bd/0f769/2019-12-28-using-webpack-to-build-a-javascript-library.png 750w,\n/static/c5d2c67f829f3c79343413ee11d249bd/2d3aa/2019-12-28-using-webpack-to-build-a-javascript-library.png 1080w,\n/static/c5d2c67f829f3c79343413ee11d249bd/60d14/2019-12-28-using-webpack-to-build-a-javascript-library.png 1366w,\n/static/c5d2c67f829f3c79343413ee11d249bd/ac0ad/2019-12-28-using-webpack-to-build-a-javascript-library.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/c5d2c67f829f3c79343413ee11d249bd/f3c20/2019-12-28-using-webpack-to-build-a-javascript-library.webp 750w,\n/static/c5d2c67f829f3c79343413ee11d249bd/9889c/2019-12-28-using-webpack-to-build-a-javascript-library.webp 1080w,\n/static/c5d2c67f829f3c79343413ee11d249bd/e04bd/2019-12-28-using-webpack-to-build-a-javascript-library.webp 1366w,\n/static/c5d2c67f829f3c79343413ee11d249bd/d3166/2019-12-28-using-webpack-to-build-a-javascript-library.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.3890625}}}}}}},"pageContext":{"id":"de120f4a-b8dc-5a51-94b3-aa3a5013efde","postPath":"/blog/2019-12-28-using-webpack-to-build-a-javascript-library"}},"staticQueryHashes":["1187565960","1421987612","2375201890","2545220355","282316431","338777631","3904166403","400598487"],"slicesMap":{}}