{"componentChunkName":"component---src-templates-post-tsx","path":"/blog/2024-02-28-managing-typescript-configurations-in-a-monorepo","result":{"data":{"file":{"name":"2024-02-28-managing-typescript-configurations-in-a-monorepo","childMarkdownRemark":{"html":"<p>Monorepos are a popular way to organize multiple related projects in a single\nrepository. They simplify dependency management, make it easier to refactor\nacross boundaries, and streamline the development process. However, managing\nTypeScript configurations in a monorepo can become cumbersome without\na systematic approach. This blog post will guide you through setting up and\nmanaging TypeScript configurations (<code class=\"language-text\">tsconfig.json</code> files) in a monorepo for\ndifferent types of projects, such as libraries, Node.js applications,\nand React applications.</p>\n<h2>The Challenge</h2>\n<p>In a monorepo, projects often share common TypeScript configurations, such as\ncompiler options and library inclusions. However, certain projects, like a\nReact application vs. a Node.js service, require specific TypeScript\nconfigurations. Manually copying configurations between projects is\nerror-prone and hard to maintain. The solution? Abstract common configurations\ninto base configuration files and extend them in individual projects.</p>\n<h2>Structuring Your Monorepo</h2>\n<p>Consider a monorepo structure where your TypeScript configuration templates\nlive under a <code class=\"language-text\">tools/tsconfig</code> directory, and your projects are organized under\n<code class=\"language-text\">packages</code>, categorized into <code class=\"language-text\">apps</code> and <code class=\"language-text\">modules</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">monorepo/\n├── packages/\n│   ├── apps/\n│   │   ├── api/ (Node.js app)\n│   │   └── react-app/ (React app)\n│   └── modules/\n│       └── my-module/ (Shared library)\n└── tools/\n    └── tsconfig/\n        ├── tsconfig.base.json\n        ├── tsconfig.library.json\n        ├── tsconfig.node-app.json\n        └── tsconfig.react-app.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Base TypeScript Configurations</h2>\n<h3><code class=\"language-text\">tsconfig.base.json</code> - The Core Configuration</h3>\n<p>This file contains compiler options common across all projects.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es2020\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"strict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skipLibCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"forceConsistentCasingInFileNames\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Specialized Configurations</h3>\n<h4><code class=\"language-text\">tsconfig.library.json</code> for Libraries</h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@monorepo/tsconfig/tsconfig.base.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"declaration\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./lib\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4><code class=\"language-text\">tsconfig.node-app.json</code> for Node.js Applications</h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@monorepo/tsconfig/tsconfig.base.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4><code class=\"language-text\">tsconfig.react-app.json</code> for React Applications</h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@monorepo/tsconfig/tsconfig.base.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-jsx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom.iterable\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Project Configuration Examples</h3>\n<p>Projects extend the appropriate base configuration.\nHere's how a <code class=\"language-text\">tsconfig.json</code> in the React app would look:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@monorepo/tsconfig/tsconfig.react-app.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"baseUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src/**/*\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Conclusion</h2>\n<p>This setup simplifies managing TypeScript configurations in a monorepo by\ncentralizing common settings and allowing for project-specific overrides. By\nabstracting these configurations into a package, we ensure consistency across\nprojects and ease the maintenance burden. As your monorepo grows, this\napproach scales efficiently, allowing you to focus on development rather\nthan configuration management.</p>","excerpt":"Monorepos are a popular way to organize multiple related projects in a single\nrepository. They simplify dependency management, make it easier to refactor\nacross boundaries, and streamline the development process. However, managing\nTypeScript configurations in a monorepo can…","frontmatter":{"title":"Managing TypeScript Configurations in a Monorepo","coverImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#3878c8","images":{"fallback":{"src":"/static/32ba99428a6dd17948a3c97b5c5fb99f/054d8/2024-02-28-managing-typescript-configurations-in-a-monorepo.png","srcSet":"/static/32ba99428a6dd17948a3c97b5c5fb99f/1a796/2024-02-28-managing-typescript-configurations-in-a-monorepo.png 750w,\n/static/32ba99428a6dd17948a3c97b5c5fb99f/054d8/2024-02-28-managing-typescript-configurations-in-a-monorepo.png 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/32ba99428a6dd17948a3c97b5c5fb99f/1e0c8/2024-02-28-managing-typescript-configurations-in-a-monorepo.webp 750w,\n/static/32ba99428a6dd17948a3c97b5c5fb99f/7592a/2024-02-28-managing-typescript-configurations-in-a-monorepo.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.42}}}}}}},"pageContext":{"id":"4f2ac50f-5d63-5174-924f-4c7978cfc0f7","postPath":"/blog/2024-02-28-managing-typescript-configurations-in-a-monorepo"}},"staticQueryHashes":["1421987612","2375201890","2545220355","282316431","338777631","3904166403","400598487","472951252"]}